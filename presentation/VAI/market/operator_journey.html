<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>The VAI Operator's Customer Journey</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com"/>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@600;700&family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">

    <!-- Font Awesome for Icons -->
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>

    <style>
        :root {
            --background-dark: #ffffff;
            --background-light: #f0f4f8;
            --text-primary: #010004;
            --text-secondary: #0b0a0d;
            --accent-glow: #d01362; /* preserved from original */
            --accent-border: rgba(139, 148, 158, 0.12);
            --glass-bg: rgba(242, 243, 246, 0.82);
            --font-heading: 'Cormorant Garamond', serif;
            --font-body: 'Poppins', sans-serif;
            --header-height: 80px;
            --journey-nav-height: 64px;
            --progress-dot-size: 12px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html, body { height: 100%; }
        html { scroll-behavior: smooth; }
        body {
            font-family: var(--font-body);
            line-height: 1.7;
            color: var(--text-primary);
            background-color: var(--background-light);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            overflow: hidden; /* we control scrolling inside .container */
        }

        /* --- HEADER & NAVIGATION --- */
        .main-header {
            background-color: var(--background-dark);
            padding: 0 40px;
            height: var(--header-height);
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid var(--accent-border);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        .logo {
            font-family: var(--font-heading);
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--text-primary);
        }
        .main-nav a {
            font-family: var(--font-body);
            text-decoration: none;
            color: var(--text-secondary);
            margin-left: 22px;
            font-size: 0.9rem;
            font-weight: 500;
            transition: color 0.22s ease;
            position: relative;
            padding-bottom: 5px;
        }
        .main-nav a:hover { color: var(--accent-glow); }
        .main-nav a.active { color: var(--accent-glow); font-weight: 600; }
        .main-nav a.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background-color: var(--accent-glow);
        }

        .journey-nav {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            padding: 10px 20px;
            height: var(--journey-nav-height);
            background: rgba(255,255,255,0.85);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            border-bottom: 1px solid var(--accent-border);
            position: sticky;
            top: var(--header-height);
            z-index: 999;
        }
        .journey-nav a {
            text-decoration: none;
            color: var(--text-secondary);
            padding: 8px 14px;
            border-radius: 20px;
            font-weight: 500;
            font-size: 0.95rem;
            border: 2px solid transparent;
            transition: all 0.22s ease;
            white-space: nowrap;
        }
        .journey-nav a:hover { background-color: rgba(0,0,0,0.03); }
        .journey-nav a.active { color: var(--accent-glow); border-color: var(--accent-glow); font-weight: 600; transform: scale(1.03); }

        /* --- Scroll container (presentation) --- */
        .container {
            height: calc(100vh - var(--header-height) - var(--journey-nav-height));
            overflow-y: auto;
            scroll-snap-type: y mandatory;
            -webkit-overflow-scrolling: touch;
        }

        /* --- HERO SECTION --- */
        .hero {
            text-align: center;
            padding: 56px 28px;
            background-color: var(--background-dark);
            scroll-snap-align: start;
        }
        .hero h1 {
            font-family: var(--font-heading);
            font-size: 2.8rem;
            margin-bottom: 10px;
            color: var(--text-primary);
            letter-spacing: -0.5px;
        }
        .hero p {
            font-size: 1.05rem;
            color: var(--text-secondary);
            max-width: 860px;
            margin: 0 auto;
        }

        /* --- JOURNEY CARDS (each section becomes a slide) --- */
        .journey-card {
            min-height: 100%;
            scroll-snap-align: start;
            background: var(--glass-bg);
            border: 1px solid var(--accent-border);
            padding: 40px;
            border-radius: 12px;
            margin: 28px;
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            box-shadow: 0 10px 30px rgba(2,6,23,0.04);
            transition: transform 0.5s ease, box-shadow 0.3s ease;
            position: relative;
        }
        .journey-card:target, .journey-card.in-view {
            transform: translateY(-6px);
            box-shadow: 0 18px 48px rgba(2,6,23,0.08);
        }

        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 18px;
            gap: 18px;
        }
        .stage-number {
            font-family: var(--font-heading);
            font-size: 3rem;
            font-weight: 700;
            color: var(--accent-glow);
            margin-right: 6px;
            line-height: 1;
            opacity: 0.98;
        }
        .stage-title {
            font-family: var(--font-heading);
            font-size: 2.0rem;
            color: var(--text-primary);
            margin-bottom: 4px;
        }
        .stage-subtitle { font-size: 1.02rem; font-weight: 500; color: var(--text-secondary); margin-top: -2px; }

        .card-description { margin-bottom: 16px; color: #444; font-size: 1rem; }

        /* Mindset / callout */
        .mindset-card {
            background: var(--background-dark);
            border-left: 4px solid var(--accent-glow);
            padding: 14px 18px;
            margin: 10px 0;
            border-radius: 0 8px 8px 0;
        }
        .mindset-card p { font-style: italic; color: #444; }

        /* Strategy list */
        .strategy-list { margin-top: 8px; }
        .strategy-list li {
            list-style: none;
            display: flex;
            align-items: flex-start;
            margin-bottom: 14px;
            gap: 12px;
        }
        .strategy-list i {
            color: var(--accent-glow);
            font-size: 1.15rem;
            width: 22px;
            text-align: center;
            margin-top: 4px;
        }

        /* Comparison table */
        .comparison-table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 0.95rem; background: #fff; border-radius: 6px; overflow: hidden; box-shadow: 0 6px 18px rgba(2,6,23,0.03); }
        .comparison-table th, .comparison-table td { padding: 12px 14px; text-align: left; border-bottom: 1px solid var(--accent-border); }
        .comparison-table th { background-color: rgba(0,0,0,0.02); font-weight: 600; }
        .comparison-table .vai-column { background-color: rgba(208,19,189,0.04); font-weight: 600; color: var(--text-primary); }

        .icp-triggers { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 16px; margin-top: 8px; }
        .icp-card { background: var(--background-dark); padding: 16px; border-radius: 8px; border: 1px solid var(--accent-border); }

        .virtuous-cycle {
            text-align: center;
            padding: 18px;
            border: 2px dashed var(--accent-border);
            background-color: var(--background-dark);
            border-radius: 8px;
            margin-top: 16px;
        }
        .virtuous-cycle p { font-size: 1.03rem; color: var(--text-secondary); font-weight: 500; }

        /* Accordion */
        .journey-details details { border-top: 1px solid var(--accent-border); }
        .journey-details summary {
            list-style: none;
            cursor: pointer;
            padding: 12px 5px;
            display: flex;
            align-items: center;
            font-family: var(--font-body);
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-secondary);
            position: relative;
            width: 100%;
            transition: color 0.18s ease;
        }
        .journey-details summary::-webkit-details-marker { display: none; }
        .journey-details summary:hover { color: var(--accent-glow); }
        .journey-details summary::after {
            content: '+';
            font-size: 1.6rem;
            font-weight: 300;
            color: var(--accent-glow);
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            transition: transform 0.28s ease-in-out;
        }
        .journey-details details[open] > summary::after { transform: translateY(-50%) rotate(45deg); }
        .journey-details details[open] > summary { color: var(--accent-glow); }
        .details-content { padding: 8px 6px 20px 6px; color: #444; }

        /* Progress tracker (dots) */
        .progress-tracker {
            position: fixed;
            right: 28px;
            top: calc(var(--header-height) + 50%);
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 12px;
            z-index: 1100;
        }
        .progress-tracker .dot {
            width: var(--progress-dot-size);
            height: var(--progress-dot-size);
            border-radius: 50%;
            border: 2px solid var(--accent-glow);
            background: transparent;
            transition: all 0.22s ease;
            cursor: pointer;
            display: inline-block;
        }
        .progress-tracker .dot.active {
            background: var(--accent-glow);
            transform: scale(1.18);
        }

        /* small helpers */
        .small-muted { font-size: 0.9rem; color: #666; }
        .muted { color: #666; }

        /* --- RESPONSIVENESS --- */
        @media (max-width: 1000px) {
            .main-header { padding: 12px 20px; height: auto; align-items: flex-start; gap: 8px; }
            .journey-nav { padding: 8px 12px; gap: 8px; top: calc(var(--header-height)); }
            .progress-tracker { right: 14px; display: none; } /* hide dots on small screens */
            .journey-card { margin: 18px; padding: 24px; }
            .stage-number { font-size: 2.4rem; }
            .stage-title { font-size: 1.6rem; }
            .hero h1 { font-size: 1.9rem; }
        }
        @media (max-width: 680px) {
            body { overflow: hidden; }
            .container { height: calc(100vh - var(--header-height) - var(--journey-nav-height)); }
            .main-nav { display: none; } /* simplify header on very small */
            .journey-nav { overflow-x: auto; gap: 6px; padding: 8px; }
        }

        /* keyboard focus outline for accessibility */
        a:focus, button:focus, summary:focus { outline: 3px solid rgba(0,217,255,0.18); outline-offset: 2px; border-radius: 6px; }
    </style>
</head>
<body>

    <header class="main-header">
        <div class="logo">VAI Market Analysis</div>
        <nav class="main-nav">
            <a href="/presentation/VAI/market/intro.html">Intro</a>
            <a href="/presentation/VAI/market/opportunity.html">Opportunity</a>
            <a href="/presentation/VAI/market/operator_ipcs.html">Operator Profiles</a>
            <a href="/presentation/VAI/market/operator_journey.html" class="active">Operator Journey</a>
            <a href="/presentation/VAI/market/tourist_personas.html">Tourist Personas</a>
            <a href="/presentation/VAI/market/tourist_journey.html">Tourist Journey</a>
            <a href="/presentation/VAI/market/strategy.html">VAI Strategy</a>
        </nav>
    </header>

    <div class="journey-nav">
        <a href="#stage1" class="nav-link">1. Awareness</a>
        <a href="#stage2" class="nav-link">2. Consideration</a>
        <a href="#stage3" class="nav-link">3. Conversion</a>
        <a href="#stage4" class="nav-link">4. Onboarding</a>
        <a href="#stage5" class="nav-link">5. Loyalty</a>
    </div>

    <!-- Progress dots -->
    <div class="progress-tracker" aria-hidden="true">
        <span class="dot" data-target="#stage1" title="Awareness"></span>
        <span class="dot" data-target="#stage2" title="Consideration"></span>
        <span class="dot" data-target="#stage3" title="Conversion"></span>
        <span class="dot" data-target="#stage4" title="Onboarding"></span>
        <span class="dot" data-target="#stage5" title="Loyalty"></span>
    </div>

    <main class="container" id="presentationContainer" tabindex="0" aria-label="VAI Operator Journey presentation">

        <section class="hero" aria-hidden="false">
            <h1>The Operator’s Customer Journey</h1>
            <p>From operational & financial friction to an empowered, profitable VAI advocate.</p>
        </section>

        <section id="stage1" class="journey-card" data-stage="1" tabindex="-1" aria-labelledby="stage1-title">
            <div class="card-header">
                <div class="stage-number">1</div>
                <div>
                    <h2 id="stage1-title" class="stage-title">Awareness</h2>
                    <p class="stage-subtitle">Discovering a Better Way</p>
                </div>
            </div>
            <p class="card-description">The journey begins by introducing VAI as a credible, local alternative to costly and often inefficient Status Quo.</p>

            <div class="journey-details">
                <details>
                    <summary>Operator's Mindset: The Pain Points</summary>
                    <div class="details-content">
                        <div class="mindset-card"><p>"I’m losing too much to commissions."</p></div>
                        <div class="mindset-card"><p>"Managing my calendar is chaos."</p></div>
                        <div class="mindset-card"><p>"Why does it take so long to get paid?"</p></div>
                        <div class="mindset-card"><p><strong>Feels stuck but resigned</strong> — "that’s just how it is."</p></div>
                    </div>
                </details>
                <details>
                    <summary>Key Touchpoints & Strategies</summary>
                    <div class="details-content">
                        <ul class="strategy-list">
                            <li><i class="fas fa-users" aria-hidden="true"></i><div><strong>Community & Peer Networks:</strong> Word-of-mouth trust in Polynesian communities.</div></li>
                            <li><i class="fas fa-building" aria-hidden="true"></i><div><strong>Institutional Engagement:</strong> Presenting at Tahiti Tourisme, CCISM and Service du Tourisme events.</div></li>
                            <li><i class="fas fa-bullhorn" aria-hidden="true"></i><div><strong>Targeted Digital Marketing:</strong> Reaching different operators with tailored financial and empowerment messaging.</div></li>
                            <li><i class="fas fa-handshake" aria-hidden="true"></i><div><strong>Direct Outreach:</strong> Local Operator Success Managers build relationships through in-person demos.</div></li>
                        </ul>
                    </div>
                </details>
            </div>
        </section>

        <section id="stage2" class="journey-card" data-stage="2" tabindex="-1" aria-labelledby="stage2-title">
            <div class="card-header">
                <div class="stage-number">2</div>
                <div>
                    <h2 id="stage2-title" class="stage-title">Consideration</h2>
                    <p class="stage-subtitle">Evaluating the Solution</p>
                </div>
            </div>
            <p class="card-description">In this stage, the goal is to build trust and prove VAI's superior value compared to the operator's current fragmented methods.</p>

            <div class="journey-details">
                <details>
                    <summary>Operator's Mindset: The Questions</summary>
                    <div class="details-content">
                        <div class="mindset-card"><p>"Is this another foreign platform?"</p></div>
                        <div class="mindset-card"><p>"Will the setup be hard?"</p></div>
                        <div class="mindset-card"><p>"What’s the <strong>real cost?</strong>"</p></div>
                        <div class="mindset-card"><p>"Will I lose my Viator bookings?"</p></div>
                    </div>
                </details>
                <details>
                    <summary>VAI's Transparent Value Proposition</summary>
                    <div class="details-content">
                        <table class="comparison-table" role="table" aria-label="VAI vs Foreign OTAs comparison">
                            <thead>
                                <tr>
                                    <th>Feature</th>
                                    <th>Foreign OTAs</th>
                                    <th class="vai-column">VAI</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td>Commission</td><td>20–30%+</td><td class="vai-column">11%, fixed</td></tr>
                                <tr><td>Payout time</td><td>30–60 days</td><td class="vai-column">48 hours</td></tr>
                                <tr><td>Currency</td><td>USD/EUR</td><td class="vai-column">XPF</td></tr>
                                <tr><td>Booking Mgmt.</td><td>Multiple systems</td><td class="vai-column">Unified Channel Manager</td></tr>
                                <tr><td>Direct website</td><td>None</td><td class="vai-column">Free, bookable site</td></tr>
                                <tr><td>Data</td><td>OTA-controlled</td><td class="vai-column">Local data sovereignty</td></tr>
                                <tr><td>Support</td><td>Outsourced</td><td class="vai-column">Local OSM</td></tr>
                            </tbody>
                        </table>
                    </div>
                </details>
            </div>
        </section>

        <section id="stage3" class="journey-card" data-stage="3" tabindex="-1" aria-labelledby="stage3-title">
            <div class="card-header">
                <div class="stage-number">3</div>
                <div>
                    <h2 id="stage3-title" class="stage-title">Conversion</h2>
                    <p class="stage-subtitle">Making the Decision</p>
                </div>
            </div>
            <p class="card-description">This is the "Aha!" moment, where the tangible benefits of switching to VAI clearly outweigh the effort of making a change.</p>

            <div class="journey-details">
                <details>
                    <summary>Triggers for Digital Operators</summary>
                    <div class="details-content">
                        <div class="icp-triggers">
                            <div class="icp-card">
                                <h4>Digitally Trapped Maximizer</h4>
                                <p>Realizes the Channel Manager eliminates double-bookings and the switch from 25% to 11% commission makes a powerful business case.</p>
                            </div>
                            <div class="icp-card">
                                <h4>Aspiring Digital Adopter</h4>
                                <p>Experiences the emotional impact of seeing their own business on a professional, globally-ready website created in minutes.</p>
                            </div>
                        </div>
                    </div>
                </details>
                <details>
                    <summary>Triggers for Relational Operators</summary>
                    <div class="details-content">
                        <div class="icp-triggers">
                            <div class="icp-card">
                                <h4>Traditional Host</h4>
                                <p>A trust-based conversation with a local VAI representative emphasizing community and cultural authenticity wins them over.</p>
                            </div>
                            <div class="icp-card">
                                <h4>Niche Independent</h4>
                                <p>Motivated by automation, simplicity, and the decisive proof of local understanding: a 48-hour payout in XPF.</p>
                            </div>
                        </div>
                    </div>
                </details>
            </div>
        </section>

        <section id="stage4" class="journey-card" data-stage="4" tabindex="-1" aria-labelledby="stage4-title">
            <div class="card-header">
                <div class="stage-number">4</div>
                <div>
                    <h2 id="stage4-title" class="stage-title">Onboarding & Activation</h2>
                    <p class="stage-subtitle">The First Success</p>
                </div>
            </div>
            <p class="card-description">The focus is on ensuring a smooth path to the first booking and payout, which is the foundation of trust and long-term retention.</p>

            <div class="journey-details">
                <details>
                    <summary>Setup & First Booking</summary>
                    <div class="details-content">
                        <ul class="strategy-list">
                            <li><i class="fas fa-magic" aria-hidden="true"></i><div><strong>Simplified Setup:</strong> An intuitive, guided onboarding process using Template-First Architecture reduces admin by up to 90%.</div></li>
                            <li><i class="fas fa-ticket-alt" aria-hidden="true"></i><div><strong>Drive First Booking:</strong> Proactive strategies like launch promos and partnerships avoid the "empty dashboard" feeling.</div></li>
                        </ul>
                    </div>
                </details>
                <details>
                    <summary>Validation & Support</summary>
                    <div class="details-content">
                        <ul class="strategy-list">
                            <li><i class="fas fa-wallet" aria-hidden="true"></i><div><strong>First Payout Experience:</strong> A fast, 48-hour payout in XPF provides tangible validation of VAI's promise.</div></li>
                            <li><i class="fas fa-headset" aria-hidden="true"></i><div><strong>Proactive Local Support:</strong> The local Operator Success Manager provides personal guidance and optimization tips.</div></li>
                        </ul>
                    </div>
                </details>
            </div>
        </section>

        <section id="stage5" class="journey-card" data-stage="5" tabindex="-1" aria-labelledby="stage5-title">
            <div class="card-header">
                <div class="stage-number">5</div>
                <div>
                    <h2 id="stage5-title" class="stage-title">Loyalty & Advocacy</h2>
                    <p class="stage-subtitle">Becoming a Partner</p>
                </div>
            </div>
            <p class="card-description">The final stage is to convert satisfied users into long-term advocates and co-creators of the VAI ecosystem.</p>

            <div class="journey-details">
                <details>
                    <summary>Operator's Mindset: The Transformation</summary>
                    <div class="details-content">
                        <div class="mindset-card"><p>"VAI really changed my business — <strong>I earn more, work less, and feel in control.</strong>"</p></div>
                        <div class="mindset-card"><p>"Others should join too."</p></div>
                    </div>
                </details>
                <details>
                    <summary>Drivers of Loyalty & The Virtuous Cycle</summary>
                    <div class="details-content">
                        <ul class="strategy-list">
                            <li><i class="fas fa-chart-line" aria-hidden="true"></i><div><strong>Sustained Value:</strong> Continuous savings, efficiency, and trust in payouts.</div></li>
                            <li><i class="fas fa-crown" aria-hidden="true"></i><div><strong>Operator Advisory Council:</strong> Formal involvement in product direction, making it truly "by Polynesia, for Polynesia."</div></li>
                            <li><i class="fas fa-lightbulb" aria-hidden="true"></i><div><strong>Community & Insights:</strong> Workshops and analytics position VAI as a strategic partner, not just a tool.</div></li>
                        </ul>
                        <div class="virtuous-cycle">
                            <p>More Bookings |<i class="fas fa-arrow-right" aria-hidden="true"></i> Better Experiences |<i class="fas fa-arrow-right" aria-hidden="true"></i> Stronger Reviews |<i class="fas fa-arrow-right" aria-hidden="true"></i> Increased Visibility <i class="fas fa-sync-alt" aria-hidden="true"></i></p>
                        </div>
                    </div>
                </details>
            </div>
        </section>

    </main>

    <script>
        // Presentation interactions: IntersectionObserver for section in-view, progress dots,
        // auto-close other <details> when one opens, keyboard navigation, dot click navigation.

        (function () {
            const container = document.getElementById('presentationContainer');
            const sections = Array.from(container.querySelectorAll('.journey-card'));
            const navLinks = Array.from(document.querySelectorAll('.journey-nav a'));
            const dots = Array.from(document.querySelectorAll('.progress-tracker .dot'));
            const detailsEls = Array.from(document.querySelectorAll('.journey-details details'));

            // Auto-collapse other details when one opens
            detailsEls.forEach(d => {
                d.addEventListener('toggle', (e) => {
                    if (d.open) {
                        detailsEls.forEach(other => { if (other !== d && other.open) other.open = false; });
                        // ensure content is visible in viewport
                        setTimeout(() => { d.scrollIntoView({behavior: 'smooth', block: 'center'}); }, 160);
                    }
                });
            });

            // IntersectionObserver - mark section in view, update nav & dots
            const observerOptions = { root: container, rootMargin: '0px', threshold: 0.52 };
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    const el = entry.target;
                    const index = Number(el.getAttribute('data-stage')) - 1;
                    if (entry.isIntersecting) {
                        el.classList.add('in-view');
                        // nav links
                        navLinks.forEach(n => n.classList.remove('active'));
                        const corresponding = document.querySelector(`.journey-nav a[href="#${el.id}"]`);
                        if (corresponding) corresponding.classList.add('active');
                        // dots
                        dots.forEach(dot => dot.classList.remove('active'));
                        if (dots[index]) dots[index].classList.add('active');
                    } else {
                        el.classList.remove('in-view');
                    }
                });
            }, observerOptions);

            sections.forEach(s => observer.observe(s));

            // Click on nav links -> scroll the container to the section
            navLinks.forEach(link => {
                link.addEventListener('click', (ev) => {
                    ev.preventDefault();
                    const targetId = link.getAttribute('href').replace('#', '');
                    const targetEl = document.getElementById(targetId);
                    if (targetEl) targetEl.scrollIntoView({ behavior: 'smooth', block: 'start' });
                });
            });

            // Dots click
            dots.forEach(dot => {
                dot.addEventListener('click', () => {
                    const target = dot.getAttribute('data-target').replace('#', '');
                    const el = document.getElementById(target);
                    if (el) el.scrollIntoView({ behavior: 'smooth', block: 'start' });
                });
            });

            // Keyboard navigation: ArrowUp/ArrowDown or PageUp/PageDown to move between sections
            container.addEventListener('keydown', (e) => {
                const activeIndex = sections.findIndex(s => s.classList.contains('in-view'));
                if (e.key === 'ArrowDown' || e.key === 'PageDown') {
                    e.preventDefault();
                    const next = sections[Math.min(sections.length - 1, Math.max(0, activeIndex + 1))];
                    if (next) next.scrollIntoView({ behavior: 'smooth', block: 'start' });
                } else if (e.key === 'ArrowUp' || e.key === 'PageUp') {
                    e.preventDefault();
                    const prev = sections[Math.max(0, activeIndex - 1)];
                    if (prev) prev.scrollIntoView({ behavior: 'smooth', block: 'start' });
                } else if (e.key === 'Home') {
                    e.preventDefault();
                    sections[0].scrollIntoView({ behavior: 'smooth', block: 'start' });
                } else if (e.key === 'End') {
                    e.preventDefault();
                    sections[sections.length - 1].scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });

            // Quick focus on the container so keyboard works immediately
            container.focus();

            // Set initial active nav link based on currentPath (keeps original behavior)
            (function setInitialNavActive() {
                const currentPath = window.location.pathname;
                const mainNavLinks = document.querySelectorAll('.main-nav a');
                mainNavLinks.forEach(link => {
                    if (link.getAttribute('href') === currentPath) {
                        link.classList.add('active');
                    } else {
                        link.classList.remove('active');
                    }
                });
            })();

            // Make sure that clicking an internal anchor keeps smooth scroll inside container
            // (handles if user clicks the main header link)
            document.querySelectorAll('a[href^="#"]').forEach(a => {
                a.addEventListener('click', (e) => {
                    const href = a.getAttribute('href');
                    if (href.startsWith('#')) {
                        e.preventDefault();
                        const id = href.replace('#','');
                        const target = document.getElementById(id);
                        if (target) target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                });
            });

            // Accessibility: allow dots to be focusable
            dots.forEach(dot => dot.setAttribute('tabindex', '0'));
            dots.forEach(dot => dot.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); dot.click(); }
            }));
        })();
    </script>

</body>
</html>
